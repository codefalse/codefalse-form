"use strict";!function(r){r.fn.codefalseFile=function(e){var t=this,i=r(this),d="codefalse-file-"+parseInt(1e5*Math.random()+""),f=r.extend({},{width:"200px",height:"200px",uploadType:"normal"},e);i.on("change",function(){for(var c=r(t)[0].files,e=function(e){var i,t=c[e],a='<div class="codefalse-file-item" style="height: '+(i=f).height+";width: "+i.width+';">   <div class="codefalse-file-operation" style="width: '+i.width+';">      <i class="codefalse-file-del codefalse-font icon-delete"></i>      <i data-modaal-content-source="" class="codefalse-file-yulan codefalse-font icon-yulan"></i>   </div>   <img src="" /></div>',n=r("#"+d).find(".codefalse-file-add");n.before(a),r(".codefalse-file-yulan").modaal({type:"image",before_open:function(e){var i=window.URL.createObjectURL(t);e.target.setAttribute("href",i)},before_close:function(e){var i=e.find("img").attr("src");window.URL.revokeObjectURL(i)}});var o=n.prev(),l=o.find("img");if("normal"===f.uploadType){var s=window.URL.createObjectURL(t);l.attr("src",s),l.on("load",function(){window.URL.revokeObjectURL(l.attr("src"))})}o.find(".codefalse-file-del").on("click",function(){o.remove()})},i=0;i<c.length;i++)e(i)}),i.attr("style","display:none"),i.after('<div id="'+d+'" class="codefalse-file">    <div class="codefalse-file-item codefalse-file-add" style="height: '+(a=f).height+";width: "+a.width+';">        <i class="codefalse-font icon-add" style="line-height: '+a.height+';"></i>    </div></div>'),r(".codefalse-file-add>i").on("click",function(){i.trigger("click")});var a}}(jQuery),function(r){function u(e,i,t){if(0<t.length){r("#"+e).find(".codefalse-input-options").show();var a=r("#"+e).find(".codefalse-input-options>ul");for(var n in t){var o=t[n],l=o[i.key],s="";for(var c in i.value){var d=i.value[c];""!=s&&(s+=i.separator),s+=o[d]}a.append('<li value="'+l+'">'+s+"</li>")}}}function p(e){r("#"+e+">.codefalse-input-options").hide().find("ul").empty()}r.fn.codefalseInput=function(e,s){var c=r(this),d={placeholder:"Please search...",key:"id",value:["name"],separator:"-",delay:200,ajax:{type:"GET",url:""},allowInputText:!1,searchName:""};r.extend(d,e);var f="",o="",i={init:function(){c.attr("type","hidden");var e=parseInt(1e5*Math.random()+"");o="codefalse-search"+e;var i=c.attr("class"),t='<input id="'+o+'" name="'+d.searchName+'" type="text" class="'+i+'" placeholder="'+d.placeholder+'" autocomplete="off"/>';c.after(t);var a='<div id="'+(f="codefalse-input"+e)+'" class="codefalse-input">        <div class="codefalse-input-options">            <ul></ul>        </div>    </div>';r("#"+o).after(a),r("#"+o).on("input",function(){c.val(""),p(f);var o=r(this),l=o.val();setTimeout(function(){var i,t,e,a,n=o.val();""!=n&&(l==n&&(clearTimeout(),null!=s&&"function"==typeof s&&s(n),null!=d.ajax.url&&""!=d.ajax.url&&(i=f,e=n,a=(t=d).ajax,r.ajax({type:a.type,url:a.url,contentType:"json",data:{codefalse:e},success:function(e){u(i,t,e)}}))))},d.delay)});var n=!0;return r("#"+o).on("blur",function(){n&&(c.val()||d.allowInputText||r(this).val(""),r("#"+f).find(".codefalse-input-options").hide())}),r("#"+f+">.codefalse-input-options").on("mouseenter",function(){n=!1}),r("#"+f+">.codefalse-input-options").on("mouseleave",function(){n=!0}),r("#"+f+">.codefalse-input-options>ul").on("click","li",function(){var e=r(this).val(),i=r(this).text();c.val(e),r("#"+o).val(i),r("#"+f).find(".codefalse-input-options").hide()}),r("#"+o).on("keypress",function(e){13==e.keyCode&&r("#"+f+">.codefalse-input-options>ul").find("li:first").trigger("click")}),this},adapter:function(e){return u(f,d,e),this},reset:function(e,i){return c.val(e),r("#"+o).val(i),this},show:function(){return r("#"+o).show(),this},hide:function(){return r("#"+o).hide(),r("#"+o).val(""),c.val(""),p(f),this}};return i.init(),i}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvZGVmYWxzZS1mb3JtLmFsbC5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJjb2RlZmFsc2VGaWxlIiwib3B0aW9ucyIsIl90aGlzMiIsInRoaXMiLCJfdGhpcyIsImNvZGVmYWxzZUlkIiwicGFyc2VJbnQiLCJNYXRoIiwicmFuZG9tIiwiZmlsZU9wdGlvbnMiLCJleHRlbmQiLCJ3aWR0aCIsImhlaWdodCIsInVwbG9hZFR5cGUiLCJvbiIsImZpbGVzIiwiX2xvb3AiLCJpIiwiZmlsZSIsIml0ZW0iLCJhZGREb20iLCJmaW5kIiwiYmVmb3JlIiwibW9kYWFsIiwidHlwZSIsImJlZm9yZV9vcGVuIiwiZSIsInVybCIsIndpbmRvdyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInRhcmdldCIsInNldEF0dHJpYnV0ZSIsImJlZm9yZV9jbG9zZSIsImF0dHIiLCJyZXZva2VPYmplY3RVUkwiLCJmaWxlRG9tIiwicHJldiIsImltZyIsInJlbW92ZSIsImxlbmd0aCIsImFmdGVyIiwidHJpZ2dlciIsImpRdWVyeSIsIl9hZGFwdGVyIiwic2hvd0lkIiwiZGF0YSIsInNob3ciLCJ1bCIsIm4iLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIm5hbWUiLCJzZXBhcmF0b3IiLCJhcHBlbmQiLCJjbGVhck9wdGlvbnMiLCJpbnB1dElkIiwiaGlkZSIsImVtcHR5IiwiY29kZWZhbHNlSW5wdXQiLCJjaGFuZ2UiLCJkZWZhdWx0cyIsInBsYWNlaG9sZGVyIiwiZGVsYXkiLCJhamF4IiwiYWxsb3dJbnB1dFRleHQiLCJzZWFyY2hOYW1lIiwic2VhcmNoSWQiLCJtZXRob2RzIiwiaW5pdCIsImNsYXp6Iiwic2VhcmNoSW5wdXQiLCJzZWxlY3RPcHRpb25IdG1sIiwidmFsIiwic2VsZiIsInR4dDEiLCJzZXRUaW1lb3V0IiwicGFyYW1zIiwidHh0MiIsImNsZWFyVGltZW91dCIsInVuZGVmaW5lZCIsImNvbnRlbnRUeXBlIiwiY29kZWZhbHNlIiwic3VjY2VzcyIsImlzSGlkZSIsInRl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TUFFWHVELEtBQU0sV0FNRixPQUxBNUQsRUFBRSxJQUFNc0UsR0FBVVYsT0FDbEI1RCxFQUFFLElBQU1zRSxHQUFVTSxJQUFJLElBRXRCdEUsRUFBTXNFLElBQUksSUFDVmxCLEVBQWFDLEdBQ050RCxPQUtmLE9BREFrRSxFQUFRQyxPQUNERCxHQWhLZixDQWtLRzFCIiwiZmlsZSI6ImNvZGVmYWxzZS1mb3JtLmFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8qKlxyXG4gKiBDb2RlZmFsc2UtRm9ybSBtb2R1bGUgZmlsZS5cclxuICovXG4oZnVuY3Rpb24gKCQpIHtcblxuICAgIGZ1bmN0aW9uIF9pbml0Q29tcG9uZW50KGlkLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBjZiA9ICc8ZGl2IGlkPVwiJyArIGlkICsgJ1wiIGNsYXNzPVwiY29kZWZhbHNlLWZpbGVcIj4nICsgJyAgICA8ZGl2IGNsYXNzPVwiY29kZWZhbHNlLWZpbGUtaXRlbSBjb2RlZmFsc2UtZmlsZS1hZGRcIiBzdHlsZT1cImhlaWdodDogJyArIG9wdGlvbnMuaGVpZ2h0ICsgJzt3aWR0aDogJyArIG9wdGlvbnMud2lkdGggKyAnO1wiPicgKyAnICAgICAgICA8aSBjbGFzcz1cImNvZGVmYWxzZS1mb250IGljb24tYWRkXCIgc3R5bGU9XCJsaW5lLWhlaWdodDogJyArIG9wdGlvbnMuaGVpZ2h0ICsgJztcIj48L2k+JyArICcgICAgPC9kaXY+JyArICc8L2Rpdj4nO1xuICAgICAgICByZXR1cm4gY2Y7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2NyZWF0ZUZpbGVJdGVtKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSAnPGRpdiBjbGFzcz1cImNvZGVmYWxzZS1maWxlLWl0ZW1cIiBzdHlsZT1cImhlaWdodDogJyArIG9wdGlvbnMuaGVpZ2h0ICsgJzt3aWR0aDogJyArIG9wdGlvbnMud2lkdGggKyAnO1wiPicgKyAnICAgPGRpdiBjbGFzcz1cImNvZGVmYWxzZS1maWxlLW9wZXJhdGlvblwiIHN0eWxlPVwid2lkdGg6ICcgKyBvcHRpb25zLndpZHRoICsgJztcIj4nICsgJyAgICAgIDxpIGNsYXNzPVwiY29kZWZhbHNlLWZpbGUtZGVsIGNvZGVmYWxzZS1mb250IGljb24tZGVsZXRlXCI+PC9pPicgKyAnICAgICAgPGkgZGF0YS1tb2RhYWwtY29udGVudC1zb3VyY2U9XCJcIiBjbGFzcz1cImNvZGVmYWxzZS1maWxlLXl1bGFuIGNvZGVmYWxzZS1mb250IGljb24teXVsYW5cIj48L2k+JyArICcgICA8L2Rpdj4nICsgJyAgIDxpbWcgc3JjPVwiXCIgLz4nICsgJzwvZGl2Pic7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAgICQuZm4uY29kZWZhbHNlRmlsZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHZhciBfdGhpcyA9ICQodGhpcyk7XG4gICAgICAgIHZhciBjb2RlZmFsc2VJZCA9ICdjb2RlZmFsc2UtZmlsZS0nICsgcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIDEwMDAwMCArICcnKTtcbiAgICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgd2lkdGg6ICcyMDBweCcsXG4gICAgICAgICAgICBoZWlnaHQ6ICcyMDBweCcsXG4gICAgICAgICAgICB1cGxvYWRUeXBlOiAnbm9ybWFsJ1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZmlsZU9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8v55uR5o6naW5wdXTpgInmi6nmlofku7ZcbiAgICAgICAgX3RoaXMub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaWxlcyA9ICQoX3RoaXMyKVswXS5maWxlcztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVzKTtcblxuICAgICAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWxlID0gZmlsZXNbaV07XG4gICAgICAgICAgICAgICAgLy8gZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX2NyZWF0ZUZpbGVJdGVtKGZpbGVPcHRpb25zKTtcbiAgICAgICAgICAgICAgICB2YXIgYWRkRG9tID0gJCgnIycgKyBjb2RlZmFsc2VJZCkuZmluZCgnLmNvZGVmYWxzZS1maWxlLWFkZCcpO1xuICAgICAgICAgICAgICAgIGFkZERvbS5iZWZvcmUoaXRlbSk7XG4gICAgICAgICAgICAgICAgLy/nu5Hlrpptb2RhYWxcbiAgICAgICAgICAgICAgICAkKCcuY29kZWZhbHNlLWZpbGUteXVsYW4nKS5tb2RhYWwoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgICAgICAgICBiZWZvcmVfb3BlbjogZnVuY3Rpb24gYmVmb3JlX29wZW4oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WKoOi9ve+8micgKyB1cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc2V0QXR0cmlidXRlKCdocmVmJywgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlX2Nsb3NlOiBmdW5jdGlvbiBiZWZvcmVfY2xvc2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGUuZmluZCgnaW1nJykuYXR0cignc3JjJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6ZSA5q+B77yaJyArIHVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy/nm5HlkKzmlofku7blnZfkuovku7ZcbiAgICAgICAgICAgICAgICB2YXIgZmlsZURvbSA9IGFkZERvbS5wcmV2KCk7XG4gICAgICAgICAgICAgICAgLy/lm77niYfliqDovb1cbiAgICAgICAgICAgICAgICB2YXIgaW1nID0gZmlsZURvbS5maW5kKCdpbWcnKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZU9wdGlvbnMudXBsb2FkVHlwZSA9PT0gJ25vcm1hbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBpbWcuYXR0cignc3JjJywgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgaW1nLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoaW1nLmF0dHIoJ3NyYycpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHt9XG4gICAgICAgICAgICAgICAgLy/lhbbku5bnsbvlnotcblxuICAgICAgICAgICAgICAgIC8v5Zu+54mH5Yig6ZmkXG4gICAgICAgICAgICAgICAgZmlsZURvbS5maW5kKCcuY29kZWZhbHNlLWZpbGUtZGVsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmaWxlRG9tLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIF9sb29wKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbWV0aG9kcyA9IHtcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IGNvZGVmYWxzZSBmaWxlLi4uLi4uJyk7XG4gICAgICAgICAgICAgICAgLy/pmpDol4/mlofku7bpgInmi6lcbiAgICAgICAgICAgICAgICBfdGhpcy5hdHRyKFwic3R5bGVcIiwgXCJkaXNwbGF5Om5vbmVcIik7XG4gICAgICAgICAgICAgICAgLy/liJ3lp4vljJbmlofku7bpgInmi6nnu4Tku7ZcbiAgICAgICAgICAgICAgICBfdGhpcy5hZnRlcihfaW5pdENvbXBvbmVudChjb2RlZmFsc2VJZCwgZmlsZU9wdGlvbnMpKTtcbiAgICAgICAgICAgICAgICAvL+ebkeWQrOa3u+WKoOS6i+S7tlxuICAgICAgICAgICAgICAgICQoJy5jb2RlZmFsc2UtZmlsZS1hZGQ+aScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbWV0aG9kcy5pbml0KCk7XG4gICAgfTtcbn0pKGpRdWVyeSk7XG4vKipcclxuICogYWpheCByZXF1ZXN0IGRhdGEgYnkgaW5wdXRbdHlwZT1cInRleHRcIl1cclxuICovXG4oZnVuY3Rpb24gKCQpIHtcbiAgICAvL3ByaXZhdGUgbWV0aG9kXG4gICAgZnVuY3Rpb24gcmVxdWVzdERhdGEoc2hvd0lkLCBvcHRpb25zLCBwYXJhbXMpIHtcbiAgICAgICAgdmFyIGFqYXggPSBvcHRpb25zLmFqYXg7XG4gICAgICAgIGNvbnNvbGUubG9nKGFqYXgudXJsICsgJzogc2VuZCBhamF4Li4uJyk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiBhamF4LnR5cGUsXG4gICAgICAgICAgICB1cmw6IGFqYXgudXJsLFxuICAgICAgICAgICAgY29udGVudFR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBjb2RlZmFsc2U6IHBhcmFtc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgICAgIF9hZGFwdGVyKHNob3dJZCwgb3B0aW9ucywgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9hZGFwdGVyKHNob3dJZCwgb3B0aW9ucywgZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkKCcjJyArIHNob3dJZCkuZmluZCgnLmNvZGVmYWxzZS1pbnB1dC1vcHRpb25zJykuc2hvdygpO1xuICAgICAgICAgICAgdmFyIHVsID0gJCgnIycgKyBzaG93SWQpLmZpbmQoJy5jb2RlZmFsc2UtaW5wdXQtb3B0aW9ucz51bCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgbiBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IGRhdGFbbl07XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IG9ialtvcHRpb25zLmtleV07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb25zLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gb3B0aW9ucy52YWx1ZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBvcHRpb25zLnNlcGFyYXRvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBvYmpbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVsLmFwcGVuZCgnPGxpIHZhbHVlPVwiJyArIGtleSArICdcIj4nICsgdmFsdWUgKyAnPC9saT4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyT3B0aW9ucyhpbnB1dElkKSB7XG4gICAgICAgICQoJyMnICsgaW5wdXRJZCArICc+LmNvZGVmYWxzZS1pbnB1dC1vcHRpb25zJykuaGlkZSgpLmZpbmQoJ3VsJykuZW1wdHkoKTtcbiAgICB9XG5cbiAgICAkLmZuLmNvZGVmYWxzZUlucHV0ID0gZnVuY3Rpb24gKG9wdGlvbnMsIGNoYW5nZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnY29kZWZhbHNlIGlucHV0IHN0YXJ0aW5nLi4uJyk7XG4gICAgICAgIHZhciBfdGhpcyA9ICQodGhpcyk7XG4gICAgICAgIC8vIGRlZmF1bHQgb3B0aW9uc1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1BsZWFzZSBzZWFyY2guLi4nLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICAgICAgdmFsdWU6IFsnbmFtZSddLFxuICAgICAgICAgICAgc2VwYXJhdG9yOiAnLScsXG4gICAgICAgICAgICBkZWxheTogMjAwLFxuICAgICAgICAgICAgYWpheDoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogJydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd0lucHV0VGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzZWFyY2hOYW1lOiAnJ1xuICAgICAgICB9O1xuICAgICAgICAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgICAgdmFyIGlucHV0SWQgPSAnJztcbiAgICAgICAgdmFyIHNlYXJjaElkID0gJyc7XG4gICAgICAgIHZhciBtZXRob2RzID0ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY29kZWZhbHNlIGlucHV0IGluaXQuLi4nKTtcbiAgICAgICAgICAgICAgICAvLyBoaWRkZW4gaW5wdXRcbiAgICAgICAgICAgICAgICBfdGhpcy5hdHRyKCd0eXBlJywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgIC8vIGNsb25lIGlucHV0XG4gICAgICAgICAgICAgICAgdmFyIHJhbmRvbSA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAxMDAwMDAgKyAnJyk7XG4gICAgICAgICAgICAgICAgc2VhcmNoSWQgPSAnY29kZWZhbHNlLXNlYXJjaCcgKyByYW5kb207XG4gICAgICAgICAgICAgICAgdmFyIGNsYXp6ID0gX3RoaXMuYXR0cignY2xhc3MnKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VhcmNoSW5wdXQgPSAnPGlucHV0IGlkPVwiJyArIHNlYXJjaElkICsgJ1wiIG5hbWU9XCInICsgZGVmYXVsdHMuc2VhcmNoTmFtZSArICdcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiJyArIGNsYXp6ICsgJ1wiIHBsYWNlaG9sZGVyPVwiJyArIGRlZmF1bHRzLnBsYWNlaG9sZGVyICsgJ1wiIGF1dG9jb21wbGV0ZT1cIm9mZlwiLz4nO1xuICAgICAgICAgICAgICAgIF90aGlzLmFmdGVyKHNlYXJjaElucHV0KTtcbiAgICAgICAgICAgICAgICAvLyBhZGQgc2VsZWN0IG9wdGlvblxuICAgICAgICAgICAgICAgIGlucHV0SWQgPSAnY29kZWZhbHNlLWlucHV0JyArIHJhbmRvbTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0T3B0aW9uSHRtbCA9ICc8ZGl2IGlkPVwiJyArIGlucHV0SWQgKyAnXCIgY2xhc3M9XCJjb2RlZmFsc2UtaW5wdXRcIj4nICsgJyAgICAgICAgPGRpdiBjbGFzcz1cImNvZGVmYWxzZS1pbnB1dC1vcHRpb25zXCI+JyArICcgICAgICAgICAgICA8dWw+PC91bD4nICsgJyAgICAgICAgPC9kaXY+JyArICcgICAgPC9kaXY+JztcbiAgICAgICAgICAgICAgICAkKCcjJyArIHNlYXJjaElkKS5hZnRlcihzZWxlY3RPcHRpb25IdG1sKTtcbiAgICAgICAgICAgICAgICAvL2FkZCBldmVudCBsaXN0ZW5lclxuICAgICAgICAgICAgICAgICQoJyMnICsgc2VhcmNoSWQpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9yZXNldCBpbnB1dFxuICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWwoJycpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhck9wdGlvbnMoaW5wdXRJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHh0MSA9IHNlbGYudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dDIgPSBzZWxmLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR4dDIgPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnKysrKysrKysnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHh0MSA9PSB0eHQyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jYWxsIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2UgIT0gdW5kZWZpbmVkICYmIHR5cGVvZiBjaGFuZ2UgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UodHh0Mik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0cy5hamF4LnVybCAhPSBudWxsICYmIGRlZmF1bHRzLmFqYXgudXJsICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3REYXRhKGlucHV0SWQsIGRlZmF1bHRzLCB0eHQyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIGRlZmF1bHRzLmRlbGF5KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgaXNIaWRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkKCcjJyArIHNlYXJjaElkKS5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSGlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy52YWwoKSAmJiAhZGVmYXVsdHMuYWxsb3dJbnB1dFRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjJyArIGlucHV0SWQpLmZpbmQoJy5jb2RlZmFsc2UtaW5wdXQtb3B0aW9ucycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoJyMnICsgaW5wdXRJZCArICc+LmNvZGVmYWxzZS1pbnB1dC1vcHRpb25zJykub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzSGlkZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoJyMnICsgaW5wdXRJZCArICc+LmNvZGVmYWxzZS1pbnB1dC1vcHRpb25zJykub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzSGlkZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJCgnIycgKyBpbnB1dElkICsgJz4uY29kZWZhbHNlLWlucHV0LW9wdGlvbnM+dWwnKS5vbignY2xpY2snLCAnbGknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9ICQodGhpcykudGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWwodmFsKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBzZWFyY2hJZCkudmFsKHRleHQpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjJyArIGlucHV0SWQpLmZpbmQoJy5jb2RlZmFsc2UtaW5wdXQtb3B0aW9ucycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvL2VudGVyIGtleWRvd25cbiAgICAgICAgICAgICAgICAkKCcjJyArIHNlYXJjaElkKS5vbigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyMnICsgaW5wdXRJZCArICc+LmNvZGVmYWxzZS1pbnB1dC1vcHRpb25zPnVsJykuZmluZCgnbGk6Zmlyc3QnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRhcHRlcjogZnVuY3Rpb24gYWRhcHRlcihkYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FwYXB0ZXIgdXBkYXRlLi4uJyk7XG4gICAgICAgICAgICAgICAgX2FkYXB0ZXIoaW5wdXRJZCwgZGVmYXVsdHMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc2V0IGNvZGVmYWxzZS4uLicpO1xuICAgICAgICAgICAgICAgIF90aGlzLnZhbChrZXkpO1xuICAgICAgICAgICAgICAgICQoJyMnICsgc2VhcmNoSWQpLnZhbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgICAgICAgICAkKCcjJyArIHNlYXJjaElkKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgICAgICAgICAgICAkKCcjJyArIHNlYXJjaElkKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnIycgKyBzZWFyY2hJZCkudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAvL3Jlc2V0IGlucHV0XG4gICAgICAgICAgICAgICAgX3RoaXMudmFsKCcnKTtcbiAgICAgICAgICAgICAgICBjbGVhck9wdGlvbnMoaW5wdXRJZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgbWV0aG9kcy5pbml0KCk7XG4gICAgICAgIHJldHVybiBtZXRob2RzO1xuICAgIH07XG59KShqUXVlcnkpOyJdfQ==
