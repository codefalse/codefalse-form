function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}!function(f){var i={init:function(a,e){var t=this;if(t.dom=f("body"),t.$elem=f(e),t.options=f.extend({},f.fn.modaal.options,t.$elem.data(),a),t.xhr=null,t.scope={is_open:!1,id:"modaal_"+(new Date).getTime()+Math.random().toString(16).substring(2),source:t.options.content_source?t.options.content_source:t.$elem.attr("href")},t.$elem.attr("data-modaal-scope",t.scope.id),t.private_options={active_class:"is_active"},t.lastFocus=null,t.options.is_locked||"confirm"==t.options.type||t.options.hide_close?t.scope.close_btn="":t.scope.close_btn='<button type="button" class="modaal-close" id="modaal-close" aria-label="'+t.options.close_aria_label+'"><span>'+t.options.close_text+"</span></button>","none"===t.options.animation&&(t.options.animation_speed=0,t.options.after_callback_delay=0),f(e).on("click.Modaal",function(a){a.preventDefault(),t.create_modaal(t,a)}),!0===t.options.outer_controls)var o="outer";else o="inner";t.scope.prev_btn='<button type="button" class="modaal-gallery-control modaal-gallery-prev modaal-gallery-prev-'+o+'" id="modaal-gallery-prev" aria-label="Previous image (use left arrow to change)"><span>Previous Image</span></button>',t.scope.next_btn='<button type="button" class="modaal-gallery-control modaal-gallery-next modaal-gallery-next-'+o+'" id="modaal-gallery-next" aria-label="Next image (use right arrow to change)"><span>Next Image</span></button>',!0===t.options.start_open&&t.create_modaal(t)},create_modaal:function(a,e){var t;if((a=this).lastFocus=a.$elem,!1!==a.options.should_open&&("function"!=typeof a.options.should_open||!1!==a.options.should_open())){switch(a.options.before_open.call(a,e),a.options.type){case"inline":a.create_basic();break;case"ajax":t=a.options.source(a.$elem,a.scope.source),a.fetch_ajax(t);break;case"confirm":a.options.is_locked=!0,a.create_confirm();break;case"image":a.create_image();break;case"iframe":t=a.options.source(a.$elem,a.scope.source),a.create_iframe(t);break;case"video":a.create_video(a.scope.source);break;case"instagram":a.create_instagram()}a.watch_events()}},watch_events:function(){var o=this;o.dom.off("click.Modaal keyup.Modaal keydown.Modaal"),o.dom.on("keydown.Modaal",function(a){var e=a.keyCode,t=a.target;9==e&&o.scope.is_open&&(f.contains(document.getElementById(o.scope.id),t)||f("#"+o.scope.id).find('*[tabindex="0"]').focus())}),o.dom.on("keyup.Modaal",function(a){var e=a.keyCode,t=a.target;return a.shiftKey&&9==a.keyCode&&o.scope.is_open&&(f.contains(document.getElementById(o.scope.id),t)||f("#"+o.scope.id).find(".modaal-close").focus()),!o.options.is_locked&&27==e&&o.scope.is_open?!f(document.activeElement).is("input:not(:checkbox):not(:radio)")&&void o.modaal_close():"image"==o.options.type?(37==e&&o.scope.is_open&&!f("#"+o.scope.id+" .modaal-gallery-prev").hasClass("is_hidden")&&o.gallery_update("prev"),void(39==e&&o.scope.is_open&&!f("#"+o.scope.id+" .modaal-gallery-next").hasClass("is_hidden")&&o.gallery_update("next"))):void 0}),o.dom.on("click.Modaal",function(a){var e=f(a.target);if(o.options.is_locked||!(o.options.overlay_close&&e.is(".modaal-inner-wrapper")||e.is(".modaal-close")||e.closest(".modaal-close").length)){if(e.is(".modaal-confirm-btn"))return e.is(".modaal-ok")&&o.options.confirm_callback.call(o,o.lastFocus),e.is(".modaal-cancel")&&o.options.confirm_cancel_callback.call(o,o.lastFocus),void o.modaal_close();if(e.is(".modaal-gallery-control")){if(e.hasClass("is_hidden"))return;return e.is(".modaal-gallery-prev")&&o.gallery_update("prev"),void(e.is(".modaal-gallery-next")&&o.gallery_update("next"))}}else o.modaal_close()})},build_modal:function(a){var e=this,t="";"instagram"==e.options.type&&(t=" modaal-instagram");var o,i="video"==e.options.type?"modaal-video-wrap":"modaal-content";switch(e.options.animation){case"fade":o=" modaal-start_fade";break;case"slide-down":o=" modaal-start_slidedown";break;default:o=" modaal-start_none"}var n="";e.options.fullscreen&&(n=" modaal-fullscreen"),""===e.options.custom_class&&void 0===e.options.custom_class||(e.options.custom_class=" "+e.options.custom_class);var l="";e.options.width&&e.options.height&&"number"==typeof e.options.width&&"number"==typeof e.options.height?l=' style="max-width:'+e.options.width+"px;height:"+e.options.height+'px;overflow:auto;"':e.options.width&&"number"==typeof e.options.width?l=' style="max-width:'+e.options.width+'px;"':e.options.height&&"number"==typeof e.options.height&&(l=' style="height:'+e.options.height+'px;overflow:auto;"'),("image"==e.options.type||"video"==e.options.type||"instagram"==e.options.type||e.options.fullscreen)&&(l="");var s="";e.is_touch()&&(s=' style="cursor:pointer;"');var d='<div class="modaal-wrapper modaal-'+e.options.type+o+t+n+e.options.custom_class+'" id="'+e.scope.id+'"><div class="modaal-outer-wrapper"><div class="modaal-inner-wrapper"'+s+">";"video"!=e.options.type&&(d+='<div class="modaal-container"'+l+">"),d+='<div class="'+i+' modaal-focus" aria-hidden="false" aria-label="'+e.options.accessible_title+" - "+e.options.close_aria_label+'" role="dialog">',"inline"==e.options.type?d+='<div class="modaal-content-container" role="document"></div>':d+=a,d+="</div>"+e.scope.close_btn,"video"!=e.options.type&&(d+="</div>"),d+="</div>","image"==e.options.type&&!0===e.options.outer_controls&&(d+=e.scope.prev_btn+e.scope.next_btn),d+="</div></div>",f("#"+e.scope.id+"_overlay").length<1&&e.dom.append(d),"inline"==e.options.type&&a.appendTo("#"+e.scope.id+" .modaal-content-container"),e.modaal_overlay("show")},create_basic:function(){var a=f(this.scope.source),e="";a.length?(e=a.contents().detach(),a.empty()):e="Content could not be loaded. Please check the source and try again.",this.build_modal(e)},create_instagram:function(){var t=this,a=t.options.instagram_id,e="",o="Instagram photo couldn't be loaded, please check the embed code and try again.";if(t.build_modal('<div class="modaal-content-container'+(""!=t.options.loading_class?" "+t.options.loading_class:"")+'">'+t.options.loading_content+"</div>"),""!=a&&null!=a){var i="https://api.instagram.com/oembed?url=http://instagr.am/p/"+a+"/";f.ajax({url:i,dataType:"jsonp",cache:!1,success:function(a){t.dom.append('<div id="temp-ig" style="width:0;height:0;overflow:hidden;">'+a.html+"</div>"),t.dom.attr("data-igloaded")?window.instgrm.Embeds.process():t.dom.attr("data-igloaded","true");var e="#"+t.scope.id+" .modaal-content-container";0<f(e).length&&setTimeout(function(){f("#temp-ig").contents().clone().appendTo(e),f("#temp-ig").remove()},1e3)},error:function(){e=o;var a=f("#"+t.scope.id+" .modaal-content-container");0<a.length&&(a.removeClass(t.options.loading_class).addClass(t.options.ajax_error_class),a.html(e))}})}else e=o;return!1},fetch_ajax:function(a){var t=this;null==t.options.accessible_title&&(t.options.accessible_title="Dialog Window"),null!==t.xhr&&(t.xhr.abort(),t.xhr=null),t.build_modal('<div class="modaal-content-container'+(""!=t.options.loading_class?" "+t.options.loading_class:"")+'">'+t.options.loading_content+"</div>"),t.xhr=f.ajax(a,{success:function(a){var e=f("#"+t.scope.id).find(".modaal-content-container");0<e.length&&(e.removeClass(t.options.loading_class),e.html(a),t.options.ajax_success.call(t,e))},error:function(a){if("abort"!=a.statusText){var e=f("#"+t.scope.id+" .modaal-content-container");0<e.length&&(e.removeClass(t.options.loading_class).addClass(t.options.ajax_error_class),e.html("Content could not be loaded. Please check the source and try again."))}}})},create_confirm:function(){var a,e=this;a='<div class="modaal-content-container"><h1 id="modaal-title">'+e.options.confirm_title+'</h1><div class="modaal-confirm-content">'+e.options.confirm_content+'</div><div class="modaal-confirm-wrap"><button type="button" class="modaal-confirm-btn modaal-ok" aria-label="Confirm">'+e.options.confirm_button_text+'</button><button type="button" class="modaal-confirm-btn modaal-cancel" aria-label="Cancel">'+e.options.confirm_cancel_button_text+"</button></div></div></div>",e.build_modal(a)},create_image:function(){var a,e,c=this,t="";if(c.$elem.is("[data-group]")||c.$elem.is("[rel]")){var o=c.$elem.is("[data-group]"),i=o?c.$elem.attr("data-group"):c.$elem.attr("rel"),n=f(o?'[data-group="'+i+'"]':'[rel="'+i+'"]');n.removeAttr("data-gallery-active","is_active"),c.$elem.attr("data-gallery-active","is_active"),e=n.length-1;var m=[];t='<div class="modaal-gallery-item-wrap">',n.each(function(a,e){var t="",o="",i="",n=!1,l=!1,s=e.getAttribute("data-modaal-desc"),d=e.getAttribute("data-gallery-active");c.scope.source?t=c.scope.source:f(e).attr("data-modaal-content-source")?t=f(e).attr("data-modaal-content-source"):f(e).attr("href")?t=f(e).attr("href"):f(e).attr("src")?t=f(e).attr("src"):(t="trigger requires href or data-modaal-content-source attribute",l=!0),i=""!=s&&null!=s?'<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image '+(a+1)+" - </span>"+(o=s).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>":'<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image '+(a+1)+"</span></div>",d&&(n=!0);var r={url:t,alt:o,rawdesc:s,desc:i,active:n,src_error:l};m.push(r)});for(var l=0;l<m.length;l++){var s="",d=m[l].rawdesc?"Image: "+m[l].rawdesc:"Image "+l+" no description";m[l].active&&(s=" "+c.private_options.active_class),t+='<div class="modaal-gallery-item gallery-item-'+l+s+'" aria-label="'+d+'">'+(m[l].src_error?m[l].url:'<img src="'+m[l].url+'" alt=" " style="width:100%">')+m[l].desc+"</div>"}t+="</div>",1!=c.options.outer_controls&&(t+=c.scope.prev_btn+c.scope.next_btn)}else{var r,p=!1;c.scope.source?r=c.scope.source:c.$elem.attr("data-modaal-content-source")?r=c.$elem.attr("data-modaal-content-source"):c.$elem.attr("href")?r=c.$elem.attr("href"):c.$elem.attr("src")?r=c.$elem.attr("src"):(r="trigger requires href or data-modaal-content-source attribute",p=!0);var u="";d="";c.$elem.attr("data-modaal-desc")?(d=c.$elem.attr("data-modaal-desc"),u='<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image - </span>'+c.$elem.attr("data-modaal-desc").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>"):d="Image with no description",t='<div class="modaal-gallery-item is_active" aria-label="'+d+'">'+(p?r:'<img src="'+r+'" alt=" " style="width:100%">')+u+"</div>"}a=t,c.build_modal(a),f(".modaal-gallery-item.is_active").is(".gallery-item-0")&&f(".modaal-gallery-prev").hide(),f(".modaal-gallery-item.is_active").is(".gallery-item-"+e)&&f(".modaal-gallery-next").hide()},gallery_update:function(a){var i=this,n=f("#"+i.scope.id),l=n.find(".modaal-gallery-item").length-1;if(0==l)return!1;var s=n.find(".modaal-gallery-prev"),d=n.find(".modaal-gallery-next"),r=0,c=0,m=n.find(".modaal-gallery-item."+i.private_options.active_class),p="next"==a?m.next(".modaal-gallery-item"):m.prev(".modaal-gallery-item");return i.options.before_image_change.call(i,m,p),("prev"!=a||!n.find(".gallery-item-0").hasClass("is_active"))&&(("next"!=a||!n.find(".gallery-item-"+l).hasClass("is_active"))&&void m.stop().animate({opacity:0},250,function(){p.addClass("is_next").css({position:"absolute",display:"block",opacity:0});var a=f(document).width(),e=1140<a?280:50;r=n.find(".modaal-gallery-item.is_next").width(),c=n.find(".modaal-gallery-item.is_next").height();var t=n.find(".modaal-gallery-item.is_next img").prop("naturalWidth"),o=n.find(".modaal-gallery-item.is_next img").prop("naturalHeight");c=a-e<t?(r=a-e,n.find(".modaal-gallery-item.is_next").css({width:r}),n.find(".modaal-gallery-item.is_next img").css({width:r}),n.find(".modaal-gallery-item.is_next").find("img").height()):(r=t,o),n.find(".modaal-gallery-item-wrap").stop().animate({width:r,height:c},250,function(){m.removeClass(i.private_options.active_class+" "+i.options.gallery_active_class).removeAttr("style"),m.find("img").removeAttr("style"),p.addClass(i.private_options.active_class+" "+i.options.gallery_active_class).removeClass("is_next").css("position",""),p.stop().animate({opacity:1},250,function(){f(this).removeAttr("style").css({width:"100%"}),f(this).find("img").css("width","100%"),n.find(".modaal-gallery-item-wrap").removeAttr("style"),i.options.after_image_change.call(i,p)}),n.find(".modaal-gallery-item").removeAttr("tabindex"),n.find(".modaal-gallery-item."+i.private_options.active_class).attr("tabindex","0").focus(),n.find(".modaal-gallery-item."+i.private_options.active_class).is(".gallery-item-0")?s.stop().animate({opacity:0},150,function(){f(this).hide()}):s.stop().css({display:"block",opacity:s.css("opacity")}).animate({opacity:1},150),n.find(".modaal-gallery-item."+i.private_options.active_class).is(".gallery-item-"+l)?d.stop().animate({opacity:0},150,function(){f(this).hide()}):d.stop().css({display:"block",opacity:s.css("opacity")}).animate({opacity:1},150)})}))},create_video:function(a){var e;e='<video height="100%" controls src="'+a+'"></video>',this.build_modal('<div class="modaal-video-container">'+e+"</div>")},create_iframe:function(a){var e,t=this;e=null!==t.options.width||void 0!==t.options.width||null!==t.options.height||void 0!==t.options.height?'<iframe src="'+a+'" class="modaal-iframe-elem" frameborder="0" allowfullscreen></iframe>':'<div class="modaal-content-container">Please specify a width and height for your iframe</div>',t.build_modal(e)},modaal_open:function(){var a=this,e=f("#"+a.scope.id),t=a.options.animation;"none"===t&&(e.removeClass("modaal-start_none"),a.options.after_open.call(a,e)),"fade"===t&&e.removeClass("modaal-start_fade"),"slide-down"===t&&e.removeClass("modaal-start_slide_down");f(".modaal-wrapper *[tabindex=0]").removeAttr("tabindex"),("image"==a.options.type?f("#"+a.scope.id).find(".modaal-gallery-item."+a.private_options.active_class):e.find(".modaal-iframe-elem").length?e.find(".modaal-iframe-elem"):e.find(".modaal-video-wrap").length?e.find(".modaal-video-wrap"):e.find(".modaal-focus")).attr("tabindex","0").focus(),"none"!==t&&setTimeout(function(){a.options.after_open.call(a,e)},a.options.after_callback_delay)},modaal_close:function(){var a=this,e=f("#"+a.scope.id);a.options.before_close.call(a,e),null!==a.xhr&&(a.xhr.abort(),a.xhr=null),"none"===a.options.animation&&e.addClass("modaal-start_none"),"fade"===a.options.animation&&e.addClass("modaal-start_fade"),"slide-down"===a.options.animation&&e.addClass("modaal-start_slide_down"),setTimeout(function(){"inline"==a.options.type&&f("#"+a.scope.id+" .modaal-content-container").contents().detach().appendTo(a.scope.source),e.remove(),a.options.after_close.call(a),a.scope.is_open=!1},a.options.after_callback_delay),a.modaal_overlay("hide"),null!=a.lastFocus&&a.lastFocus.focus()},modaal_overlay:function(a){var e=this;"show"==a?(e.scope.is_open=!0,e.options.background_scroll||e.dom.addClass("modaal-noscroll"),f("#"+e.scope.id+"_overlay").length<1&&e.dom.append('<div class="modaal-overlay" id="'+e.scope.id+'_overlay"></div>'),f("#"+e.scope.id+"_overlay").css("background",e.options.background).stop().animate({opacity:e.options.overlay_opacity},e.options.animation_speed,function(){e.modaal_open()})):"hide"==a&&f("#"+e.scope.id+"_overlay").stop().animate({opacity:0},e.options.animation_speed,function(){f(this).remove(),e.dom.removeClass("modaal-noscroll")})},is_touch:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},n=[];function o(a){var e={},t=!1;a.attr("data-modaal-type")&&(t=!0,e.type=a.attr("data-modaal-type")),a.attr("data-modaal-content-source")&&(t=!0,e.content_source=a.attr("data-modaal-content-source")),a.attr("data-modaal-animation")&&(t=!0,e.animation=a.attr("data-modaal-animation")),a.attr("data-modaal-animation-speed")&&(t=!0,e.animation_speed=a.attr("data-modaal-animation-speed")),a.attr("data-modaal-after-callback-delay")&&(t=!0,e.after_callback_delay=a.attr("data-modaal-after-callback-delay")),a.attr("data-modaal-is-locked")&&(t=!0,e.is_locked="true"===a.attr("data-modaal-is-locked")),a.attr("data-modaal-hide-close")&&(t=!0,e.hide_close="true"===a.attr("data-modaal-hide-close")),a.attr("data-modaal-background")&&(t=!0,e.background=a.attr("data-modaal-background")),a.attr("data-modaal-overlay-opacity")&&(t=!0,e.overlay_opacity=a.attr("data-modaal-overlay-opacity")),a.attr("data-modaal-overlay-close")&&(t=!0,e.overlay_close="false"!==a.attr("data-modaal-overlay-close")),a.attr("data-modaal-accessible-title")&&(t=!0,e.accessible_title=a.attr("data-modaal-accessible-title")),a.attr("data-modaal-start-open")&&(t=!0,e.start_open="true"===a.attr("data-modaal-start-open")),a.attr("data-modaal-fullscreen")&&(t=!0,e.fullscreen="true"===a.attr("data-modaal-fullscreen")),a.attr("data-modaal-custom-class")&&(t=!0,e.custom_class=a.attr("data-modaal-custom-class")),a.attr("data-modaal-close-text")&&(t=!0,e.close_text=a.attr("data-modaal-close-text")),a.attr("data-modaal-close-aria-label")&&(t=!0,e.close_aria_label=a.attr("data-modaal-close-aria-label")),a.attr("data-modaal-background-scroll")&&(t=!0,e.background_scroll="true"===a.attr("data-modaal-background-scroll")),a.attr("data-modaal-width")&&(t=!0,e.width=parseInt(a.attr("data-modaal-width"))),a.attr("data-modaal-height")&&(t=!0,e.height=parseInt(a.attr("data-modaal-height"))),a.attr("data-modaal-confirm-button-text")&&(t=!0,e.confirm_button_text=a.attr("data-modaal-confirm-button-text")),a.attr("data-modaal-confirm-cancel-button-text")&&(t=!0,e.confirm_cancel_button_text=a.attr("data-modaal-confirm-cancel-button-text")),a.attr("data-modaal-confirm-title")&&(t=!0,e.confirm_title=a.attr("data-modaal-confirm-title")),a.attr("data-modaal-confirm-content")&&(t=!0,e.confirm_content=a.attr("data-modaal-confirm-content")),a.attr("data-modaal-gallery-active-class")&&(t=!0,e.gallery_active_class=a.attr("data-modaal-gallery-active-class")),a.attr("data-modaal-loading-content")&&(t=!0,e.loading_content=a.attr("data-modaal-loading-content")),a.attr("data-modaal-loading-class")&&(t=!0,e.loading_class=a.attr("data-modaal-loading-class")),a.attr("data-modaal-ajax-error-class")&&(t=!0,e.ajax_error_class=a.attr("data-modaal-ajax-error-class")),a.attr("data-modaal-instagram-id")&&(t=!0,e.instagram_id=a.attr("data-modaal-instagram-id")),t&&a.modaal(e)}f.fn.modaal=function(o){return this.each(function(a){var e=f(this).data("modaal");if(e){if("string"==typeof o)switch(o){case"open":e.create_modaal(e);break;case"close":e.modaal_close()}}else{var t=Object.create(i);t.init(o,this),f.data(this,"modaal",t),n.push({element:f(this).attr("class"),options:o})}})},f.fn.modaal.options={type:"inline",content_source:null,animation:"fade",animation_speed:300,after_callback_delay:350,is_locked:!1,hide_close:!1,background:"#000",overlay_opacity:"0.8",overlay_close:!0,accessible_title:"Dialog Window",start_open:!1,fullscreen:!1,custom_class:"",background_scroll:!1,should_open:!0,close_text:"Close",close_aria_label:"Close (Press escape to close)",width:null,height:null,before_open:function(){},after_open:function(){},before_close:function(){},after_close:function(){},source:function(a,e){return e},confirm_button_text:"Confirm",confirm_cancel_button_text:"Cancel",confirm_title:"Confirm Title",confirm_content:"<p>This is the default confirm dialog content. Replace me through the options</p>",confirm_callback:function(){},confirm_cancel_callback:function(){},gallery_active_class:"gallery_active_item",outer_controls:!1,before_image_change:function(a,e){},after_image_change:function(a){},loading_content:'<div class="modaal-loading-spinner"><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div></div>',loading_class:"is_loading",ajax_error_class:"modaal-error",ajax_success:function(){},instagram_id:null},f(function(){var a=f(".modaal");a.length&&a.each(function(){o(f(this))});var e=new MutationObserver(function(a){a.forEach(function(a){if(a.addedNodes&&0<a.addedNodes.length)[].some.call(a.addedNodes,function(a){var e=f(a);(e.is("a")||e.is("button"))&&(e.hasClass("modaal")?o(e):n.forEach(function(a){if(a.element==e.attr("class"))return f(e).modaal(a.options),!1}))})})}),t={subtree:!0,attributes:!0,childList:!0,characterData:!0};setTimeout(function(){e.observe(document.body,t)},500)})}(jQuery,window,document),function(n){function s(a,e,t,o,i){var n,l,s,d=a.options,r='<div class="codefalse-file-item file-item" status="'+i+'" style="height: '+d.height+";width: "+d.width+';">   <div class="codefalse-file-operation" style="width: '+d.width+';">      <span class="codefalse-file-name">'+e+"</span> "+function(a){var e='<i class="codefalse-file-delete codefalse-font icon-delete"></i>';for(var t in a.actions){var o=a.actions[t];e+='<i class="codefalse-file-'+o+" codefalse-font icon-"+o+'"></i>'}return e}(d)+"   </div>"+(n=t,s="","image"===(l=d).type?s='<img src="'+n+'" />':"video"===l.type&&(s=n?'<img src="'+n+'" />':'<i class="codefalse-font icon-video" style="line-height: '+l.height+';"></i>'),s)+'   <input type="hidden" name="'+d.name+'" value="'+o+'"/></div>';a.$container.find(".file-add").before(r)}function d(a,e){var t=a.options.type,o=a.$container.find(".file-item:last").find(".codefalse-file-preview");o&&("image"!==t&&"video"!==t||o.modaal({type:t,content_source:e}))}function i(t,o,i,n){var a=t.options.type;if("image"===a)s(t,o,i,i,n),d(t,i);else if("video"===a)if(t.options.useCapture){var l=document.createElement("video");l.onloadeddata=function(){var a=document.createElement("canvas");a.width=l.videoWidth,a.height=l.videoHeight,a.getContext("2d").drawImage(l,0,0,a.width,a.height);var e=a.toDataURL("image/png");a=l=null,s(t,o,e,i,n),d(t,i)},l.src=i}else s(t,o,"",i,n),d(t,i)}n.fn.codefalseFile=function(a){var s={};s.$elem=n(this);var t="codefalse-file-"+parseInt(1e5*Math.random()+"");s.id=t;s.options=n.extend({},{show:!0,type:"image",accept:"",maxFiles:3,width:"150px",height:"150px",name:"codefalseFile",deleteName:"",actions:["preview"],useCapture:!1,upload:function(){}},a);var d=[],r=[],o={_init:function(){var a,e;s.$elem.hide(),s.$elem.on("change",function(){var o=this.files,a=function(a){if(!o.hasOwnProperty(a))return"continue";var t=o[a];d.push(t);var e=new FileReader;e.onload=function(a){var e=a.target.result;i(s,t.name,e,"add")},e.readAsDataURL(t)};for(var e in o)a(e);n(this).val("")}),console.log("init codefalse-file..."),s.$elem.after((e=(a=s).options,'<div id="'+a.id+'" class="codefalse-file">    <div class="codefalse-file-item file-add" style="height: '+e.height+";width: "+e.width+';">        <i class="codefalse-font icon-add" style="line-height: '+e.height+';"></i>    </div>    <div class="codefalse-errors"></div> </div>')),s.$container=n("#"+s.id),s.$error=s.$container.find(".codefalse-errors"),s.$container.find(".file-add>i").on("click",function(){n("#"+t).find(".file-item").length>=s.options.maxFiles?s.$error.text("最多能添加"+s.options.maxFiles+"个文件"):s.$elem.trigger("click")}),s.$container.on("mouseenter",".file-item",function(){n(this).find(".codefalse-file-operation").show()}),s.$container.on("mouseleave",".file-item",function(){n(this).find(".codefalse-file-operation").hide()}),s.$container.on("click",".codefalse-file-delete",function(){var a=n(this).parent().parent(),e=s.$container.find(".file-item").index(a);o.clear(e)}),s.$container.on("click",".codefalse-file-upload",function(){var a=n(this).parent().parent(),e=s.$container.find(".file-item").index(a);o.upload(e)})},upload:function(a){if(null!=a){var e=s.$container.find(".file-item").eq(a);if(!r[a]){var t=s.options.upload(d[a],a);t&&(e.find("input").val(t),r[a]=t)}}else{var o=[];s.$container.find(".file-item").each(function(a){r[a]||(o[a]=d[a])});var i=s.options.upload(o);if(i)for(var n in i)if(i.hasOwnProperty(n)){var l=i[n];if(l)s.$container.find(".file-item").eq(n).find("input").val(l),r[n]=l}}},adapter:function(a,e){if(void 0===e&&(e="update"),"string"==typeof a)d.push(a),"update"===e&&(r[d.length-1]=a),i(s,"",a,e);else if("object"===_typeof(a)){var t=a.length;void 0===t?s.$error.text("parameters must be string|array"):t>s.options.maxFiles&&(a.splice(s.options.maxFiles),s.$error.text("最多能添加"+s.options.maxFiles+"个文件"));for(var o=0;o<a.length;o++)d.push(a[o]),"update"===e&&(r[d.length-1]=a[o]),i(s,"",a[o],e)}},size:function(){return s.$container.find(".file-item").length},clear:function(a){if(null!=a){var e=s.$container.find(".file-item").eq(a),t=e.attr("status"),o=d[a];if(d.splice(a,1),r.splice(a,1),"update"===t&&""!==s.options.deleteName){var i='<input type="hidden" name="'+s.options.deleteName+'" value="'+o+'" />';s.$container.append(i)}e.remove()}else s.$container.find(".file-item").each(function(a){var e=n(this).attr("status"),t=d[a];if("update"===e&&""!==s.options.deleteName){var o='<input type="hidden" name="'+s.options.deleteName+'" value="'+t+'" />';s.$container.append(o)}n(this).remove()}),d=[],r=[]},show:function(){s.$container.show()},hide:function(){this.clear(),s.$container.hide()}};return o._init(),o}}(jQuery);"use strict";!function(m){function p(a,e,t){if(0<t.length){m("#"+a).find(".codefalse-input-options").show();var o=m("#"+a).find(".codefalse-input-options>ul");for(var i in t){var n=t[i],l=n[e.key],s="";for(var d in e.value){var r=e.value[d];""!=s&&(s+=e.separator),s+=n[r]}o.append('<li value="'+l+'">'+s+"</li>")}}}function u(a){m("#"+a+">.codefalse-input-options").hide().find("ul").empty()}m.fn.codefalseInput=function(a,s){console.log("codefalse input starting...");var d=m(this),r={placeholder:"Please search...",key:"id",value:["name"],separator:"-",delay:200,ajax:{type:"GET",url:""},allowInputText:!1,searchName:""};m.extend(r,a);var c="",n="",e={init:function(){console.log("codefalse input init..."),d.attr("type","hidden");var a=parseInt(1e5*Math.random()+"");n="codefalse-search"+a;var e=d.attr("class"),t='<input id="'+n+'" name="'+r.searchName+'" type="text" class="'+e+'" placeholder="'+r.placeholder+'" autocomplete="off"/>';d.after(t);var o='<div id="'+(c="codefalse-input"+a)+'" class="codefalse-input">        <div class="codefalse-input-options">            <ul></ul>        </div>    </div>';m("#"+n).after(o),m("#"+n).on("input",function(){d.val(""),u(c);var n=m(this),l=n.val();setTimeout(function(){var e,t,a,o,i=n.val();""!=i?l==i&&(clearTimeout(),null!=s&&"function"==typeof s&&s(i),null!=r.ajax.url&&""!=r.ajax.url&&(e=c,a=i,o=(t=r).ajax,console.log(o.url+": send ajax..."),m.ajax({type:o.type,url:o.url,contentType:"json",data:{codefalse:a},success:function(a){p(e,t,a)}}))):console.log("++++++++")},r.delay)});var i=!0;return m("#"+n).on("blur",function(){i&&(d.val()||r.allowInputText||m(this).val(""),m("#"+c).find(".codefalse-input-options").hide())}),m("#"+c+">.codefalse-input-options").on("mouseenter",function(){i=!1}),m("#"+c+">.codefalse-input-options").on("mouseleave",function(){i=!0}),m("#"+c+">.codefalse-input-options>ul").on("click","li",function(){var a=m(this).val(),e=m(this).text();d.val(a),m("#"+n).val(e),m("#"+c).find(".codefalse-input-options").hide()}),m("#"+n).on("keypress",function(a){13==a.keyCode&&m("#"+c+">.codefalse-input-options>ul").find("li:first").trigger("click")}),this},adapter:function(a){return console.log("apapter update..."),p(c,r,a),this},reset:function(a,e){return console.log("reset codefalse..."),d.val(a),m("#"+n).val(e),this},show:function(){return m("#"+n).show(),this},hide:function(){return m("#"+n).hide(),m("#"+n).val(""),d.val(""),u(c),this}};return e.init(),e}}(jQuery);
//# sourceMappingURL=cf-form.min.js.map